<!DOCTYPE html>
<html>
<body style="background:#000;color:#fff">
<h2>Admin Panel</h2>
<div id="users"></div>

<script type="module">
import { db } from "./firebase.js";
import { collection, getDocs, updateDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const snap=await getDocs(collection(db,"users"));
snap.forEach(d=>{
  users.innerHTML+=`
  <div>
    ${d.data().name}
    <button onclick="makeAdmin('${d.id}')">Admin Yap</button>
  </div>`;
});

window.makeAdmin=async(id)=>{
  await updateDoc(doc(db,"users",id),{role:"Admin"});
  location.reload();
}
</script>
</body>
</html>
